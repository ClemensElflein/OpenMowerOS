#
# DO NOT EDIT THIS FILE!
# Instead of, edit the .env file below this one
#
services:
  open_mower_ros:
    image: "ghcr.io/clemenselflein/open_mower_ros:${VERSION}"
    container_name: open_mower_ros
    privileged: true
    restart: unless-stopped
    network_mode: host
    depends_on:
      - mosquitto
    volumes:
      - /dev:/dev
      - /home/openmower:/home/openmower
      - /home/openmower/mower_params.yaml:/config/mower_params.yaml
    working_dir: /home/openmower
    environment:
      DEBUG: $DEBUG
      OM_V2: $V2_HARDWARE
      OM_MOWER: $MOWER
  
  # MQTT broker for OpenMower
  Mosquitto:
    image: eclipse-mosquitto:2
    container_name: Mosquitto
    restart: unless-stopped
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - ./mosquitto.conf:/mosquitto/config/mosquitto.conf:ro

  # OpenMowerApp bundled with nginx
  OpenMowerApp:
    image: ghcr.io/apehaenger/openmowerapp:v2-rework
    container_name: OpenMowerApp
    restart: unless-stopped
    ports:
      - "8080:8080"

# Dockge-specific extras shown in the UI
x-dockge:
  urls:
  - http://${HOSTNAME}:8080
